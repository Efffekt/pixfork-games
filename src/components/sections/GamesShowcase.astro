---
import { games } from '../../data/games';
import NeonCard from '../ui/NeonCard.astro';
import Badge from '../ui/Badge.astro';
import SectionHeading from '../ui/SectionHeading.astro';

const platformIcons: Record<string, string> = {
  ios: `<svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor"><path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.8-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"/></svg>`,
  android: `<svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor"><path d="M17.523 15.341a.667.667 0 0 0 0-1.334.667.667 0 0 0 0 1.334m-11.046 0a.667.667 0 0 0 0-1.334.667.667 0 0 0 0 1.334m11.405-6.02 2.007-3.476a.416.416 0 0 0-.152-.567.416.416 0 0 0-.568.152L17.12 8.96c-1.555-.707-3.295-1.1-5.12-1.1s-3.565.393-5.12 1.1L4.832 5.43a.416.416 0 0 0-.568-.152.416.416 0 0 0-.152.567l2.007 3.477C2.685 11.16.382 14.951.382 19.234h23.236c0-4.283-2.303-8.074-5.736-9.913"/></svg>`,
  steam: `<svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor"><path d="M11.979 0C5.678 0 .511 4.86.022 11.037l6.432 2.658c.545-.371 1.203-.59 1.912-.59.063 0 .125.004.188.006l2.861-4.142V8.91c0-2.495 2.028-4.524 4.524-4.524 2.494 0 4.524 2.031 4.524 4.527s-2.03 4.525-4.524 4.525h-.105l-4.076 2.911c0 .052.004.105.004.159 0 1.875-1.515 3.396-3.39 3.396-1.635 0-3.016-1.173-3.331-2.727L.436 15.27C1.862 20.307 6.486 24 11.979 24c6.627 0 11.999-5.373 11.999-12S18.605 0 11.979 0z"/></svg>`,
  pc: `<svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg>`,
  console: `<svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="6" width="20" height="12" rx="2"/><line x1="6" y1="12" x2="6.01" y2="12"/><line x1="10" y1="12" x2="10.01" y2="12"/></svg>`,
};
---

<section id="games" class="relative py-24 md:py-32">
  <div class="max-w-7xl mx-auto px-6 md:px-12">
    <SectionHeading
      title="Our Games"
      subtitle="From ocean depths to neon mazes to Cold War mysteries."
    />

    <!-- Game cards grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      {games.map((game) => (
        <NeonCard
          href={`/games/${game.slug}`}
          accentColor={game.accentColor}
          comingSoon={game.status === 'coming-soon'}
        >
          <!-- Image placeholder -->
          <div class="relative aspect-video overflow-hidden">
            <div
              class="absolute inset-0 flex items-center justify-center"
              style={`background: linear-gradient(135deg, ${game.accentColor}11, ${game.accentColor}05);`}
            >
              <div class="text-center">
                <div
                  class="font-heading text-[10px] uppercase tracking-widest opacity-30 mb-2"
                  style={`color: ${game.accentColor};`}
                >
                  {game.title}
                </div>
                <p class="font-mono text-[10px] text-text-muted/40">
                  // SCREENSHOT PLACEHOLDER
                </p>
              </div>
            </div>

            {/* VHS effect on On Tape card */}
            {game.slug === 'on-tape-rewind' && (
              <div class="vhs-overlay"></div>
            )}

            {/* Gradient overlay */}
            <div class="absolute inset-0 bg-gradient-to-t from-bg-surface via-transparent to-transparent"></div>
          </div>

          <!-- Card info -->
          <div class="p-5 space-y-3">
            <h3
              class="font-heading text-xs text-text-primary uppercase tracking-wider"
              style={game.slug === 'on-tape-rewind' ? `text-shadow: 0 0 8px ${game.accentColor}40;` : ''}
            >
              {game.title}
            </h3>

            <p class="text-text-secondary text-sm leading-relaxed line-clamp-2">
              {game.tagline}
            </p>

            <!-- Platform icons -->
            <div class="flex items-center gap-3 pt-1">
              <div class="flex gap-2 text-text-muted">
                {game.platforms.map((platform) => (
                  <span set:html={platformIcons[platform] || ''} title={platform} />
                ))}
              </div>
              <span class="text-text-muted text-xs">
                {game.status === 'coming-soon' ? game.releaseYear : `Released ${game.releaseYear}`}
              </span>
            </div>

            <!-- Learn more -->
            <div
              class="flex items-center gap-1 text-xs font-heading uppercase tracking-wider pt-2 group-hover:gap-2 transition-all"
              style={`color: ${game.accentColor};`}
            >
              <span>Learn More</span>
              <svg class="w-3 h-3" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="5" y1="12" x2="19" y2="12" />
                <polyline points="12 5 19 12 12 19" />
              </svg>
            </div>
          </div>
        </NeonCard>
      ))}
    </div>
  </div>
</section>
