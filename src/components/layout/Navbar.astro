---
import { Icon } from 'astro-icon/components';
import MobileMenu from './MobileMenu.tsx';

const navLinks = [
  { label: 'Games', href: '/#games' },
  { label: 'About', href: '/about' },
  { label: 'Press', href: '/press' },
  { label: 'Contact', href: '/contact' },
];
---

<header
  id="navbar"
  class="fixed top-0 left-0 right-0 z-40 bg-bg-deep border-b-2 border-accent-primary"
>
  <nav class="max-w-7xl mx-auto px-6 md:px-12 py-4 flex items-center justify-between" aria-label="Main navigation">
    <!-- Logo -->
    <a href="/" class="flex items-center">
      <img
        src="/images/logo/pixfork-logo-white.svg"
        alt="Pixfork Games"
        class="h-10 md:h-12 w-auto nav-logo-dark"
      />
      <img
        src="/images/logo/pixfork-logo-black.svg"
        alt="Pixfork Games"
        class="h-10 md:h-12 w-auto nav-logo-light hidden"
      />
    </a>

    <!-- Desktop nav -->
    <div class="hidden md:flex items-center gap-8">
      {navLinks.map((link) => (
        <a
          href={link.href}
          class="font-heading text-sm text-text-muted uppercase tracking-wider hover:text-accent-primary transition-colors duration-100 py-2"
        >
          {link.label}
        </a>
      ))}
    </div>

    <!-- Actions -->
    <div class="flex items-center gap-4">
      <!-- Theme toggle -->
      <button
        id="theme-toggle"
        type="button"
        class="w-10 h-10 flex items-center justify-center text-text-muted hover:text-accent-primary transition-colors border border-white/10 hover:border-accent-primary"
        aria-label="Toggle light/dark mode"
      >
        <Icon name="lucide:sun" class="w-4 h-4 theme-icon-sun" />
        <Icon name="lucide:moon" class="w-4 h-4 theme-icon-moon hidden" />
      </button>

      <!-- Steam CTA (desktop only) -->
      <a
        href="/games/on-tape-rewind"
        class="hidden lg:inline-block px-4 py-2 text-xs font-heading uppercase tracking-wider text-game-ontape border-2 border-game-ontape hover:bg-game-ontape hover:text-bg-deep transition-all"
        style="box-shadow: 3px 3px 0 var(--color-game-ontape);"
      >
        On Tape &lt;&lt; Rewind
      </a>

      <!-- Mobile menu -->
      <MobileMenu client:load />
    </div>
  </nav>
</header>

<script>
  const toggle = document.getElementById('theme-toggle');
  const sunIcon = toggle?.querySelector('.theme-icon-sun');
  const moonIcon = toggle?.querySelector('.theme-icon-moon');

  function updateIcons() {
    const isLight = document.documentElement.classList.contains('light');
    if (sunIcon) sunIcon.classList.toggle('hidden', isLight);
    if (moonIcon) moonIcon.classList.toggle('hidden', !isLight);
  }

  updateIcons();

  toggle?.addEventListener('click', () => {
    const isLight = document.documentElement.classList.toggle('light');
    localStorage.setItem('theme', isLight ? 'light' : 'dark');
    updateIcons();
  });
</script>
