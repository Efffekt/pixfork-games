---
import MobileMenu from './MobileMenu.tsx';

const baseUrl = import.meta.env.BASE_URL;

const navLinks = [
  { label: 'Games', href: '/#games' },
  { label: 'About', href: '/about' },
  { label: 'Press', href: '/press' },
  { label: 'Contact', href: '/contact' },
];
---

<header
  id="navbar"
  class="fixed top-0 left-0 right-0 z-40 transition-all duration-300"
>
  <nav class="max-w-7xl mx-auto px-6 md:px-12 py-4 flex items-center justify-between">
    <!-- Logo -->
    <a
      href={baseUrl}
      class="flex items-center gap-3 group"
    >
      <img
        src={`${baseUrl}images/logo/pixfork-icon.svg`}
        alt=""
        class="w-8 h-8 transition-transform group-hover:scale-110"
      />
      <span class="font-heading text-[10px] md:text-xs text-text-primary uppercase tracking-widest neon-text-subtle">
        Pixfork
      </span>
    </a>

    <!-- Desktop nav -->
    <div class="hidden md:flex items-center gap-8">
      {navLinks.map((link) => (
        <a
          href={`${baseUrl}${link.href}`.replace('//', '/')}
          class="font-heading text-[10px] text-text-muted uppercase tracking-wider hover:text-accent-primary transition-colors duration-200"
        >
          {link.label}
        </a>
      ))}
    </div>

    <!-- Social + mobile menu -->
    <div class="flex items-center gap-4">
      <!-- Steam CTA (desktop only) -->
      <a
        href={`${baseUrl}games/on-tape-rewind`}
        class="hidden lg:inline-block px-4 py-2 text-[8px] font-heading uppercase tracking-wider text-game-ontape border border-game-ontape hover:bg-game-ontape hover:text-bg-deep transition-all"
      >
        On Tape &lt;&lt; Rewind
      </a>

      <!-- Mobile menu -->
      <MobileMenu client:load baseUrl={baseUrl} />
    </div>
  </nav>
</header>

<script>
  // Navbar scroll behavior: transparent -> solid
  const navbar = document.getElementById('navbar');
  if (navbar) {
    const updateNavbar = () => {
      if (window.scrollY > window.innerHeight * 0.3) {
        navbar.style.backgroundColor = 'rgba(10, 10, 15, 0.95)';
        navbar.style.backdropFilter = 'blur(10px)';
        navbar.style.borderBottom = '1px solid rgba(255, 255, 255, 0.05)';
      } else {
        navbar.style.backgroundColor = 'transparent';
        navbar.style.backdropFilter = 'none';
        navbar.style.borderBottom = '1px solid transparent';
      }
    };
    window.addEventListener('scroll', updateNavbar, { passive: true });
    updateNavbar();
  }
</script>
