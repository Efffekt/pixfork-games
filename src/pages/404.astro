---
import BaseLayout from '../layouts/BaseLayout.astro';

const baseUrl = import.meta.env.BASE_URL;
---

<BaseLayout title="Game Over — Page Not Found — Pixfork Games">
  <main class="min-h-screen flex items-center justify-center px-6">
    <div class="text-center max-w-lg">
      <!-- Game Over text -->
      <div class="mb-8">
        <h1 class="font-heading text-3xl md:text-5xl text-accent-secondary uppercase tracking-wider mb-4 neon-text-magenta">
          Game Over
        </h1>
        <p class="font-heading text-sm text-text-muted uppercase tracking-wider">
          Level Not Found
        </p>
      </div>

      <!-- Pixel character falling -->
      <div class="mb-8 relative h-24 flex items-end justify-center" aria-hidden="true">
        <!-- Platform -->
        <div class="w-32 h-2 bg-accent-primary"></div>
        <!-- Character pixel art (simple) -->
        <div class="absolute bottom-8 animate-[float_2s_ease-in-out_infinite]">
          <div class="flex flex-col items-center">
            <div class="flex gap-0.5">
              <div class="w-2 h-2 bg-accent-primary"></div>
              <div class="w-2 h-2 bg-accent-primary"></div>
            </div>
            <div class="flex gap-0.5 mt-0.5">
              <div class="w-2 h-2 bg-accent-primary-muted"></div>
              <div class="w-2 h-2 bg-accent-secondary"></div>
              <div class="w-2 h-2 bg-accent-primary-muted"></div>
            </div>
            <div class="flex gap-0.5 mt-0.5">
              <div class="w-2 h-2 bg-accent-primary"></div>
              <div class="w-2 h-2 bg-accent-primary"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Error code -->
      <p class="font-mono text-text-muted text-sm mb-8">
        ERROR 404: The page you're looking for doesn't exist or has been moved.
      </p>

      <!-- Countdown -->
      <div class="mb-8">
        <p class="font-heading text-xs text-text-muted uppercase tracking-wider mb-2">
          Continue?
        </p>
        <p id="countdown" class="font-heading text-2xl text-accent-primary neon-text">
          10
        </p>
      </div>

      <!-- Actions -->
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a
          href={baseUrl}
          class="pixel-border px-8 py-3 font-heading text-xs text-accent-primary uppercase tracking-wider"
        >
          Return Home
        </a>
        <button
          onclick="history.back()"
          class="px-8 py-3 font-heading text-xs text-text-muted uppercase tracking-wider border-2 border-text-muted hover:border-accent-primary hover:text-accent-primary transition-colors"
        >
          Go Back
        </button>
      </div>
    </div>
  </main>

  <script>
    // Countdown timer that redirects home
    const el = document.getElementById('countdown');
    const baseUrl = document.querySelector('link[rel="canonical"]')?.getAttribute('href')?.replace(/\/404\/?$/, '/') || '/';
    let count = 10;
    const interval = setInterval(() => {
      count -= 1;
      if (el) el.textContent = String(count);
      if (count <= 0) {
        clearInterval(interval);
        window.location.href = baseUrl;
      }
    }, 1000);
  </script>
</BaseLayout>
